<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>RGB Cycling Bouncing Timer</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    html, body { width:100%; height:100%; overflow:hidden; }
    canvas { display:block; background:#f0f0f0; }
    #startStop {
      position:absolute;
      bottom:20px; left:50%;
      transform:translateX(-50%);
      padding:10px 20px;
      font-size:1.2rem;
      border:2px solid #333;
      border-radius:5%;
      background:#f0f0f0;
      cursor:pointer;
      z-index:10;
      transition:background .2s, color .2s;
    }
    #startStop:hover { background:#333; color:#fff; }
  </style>
</head>
<body>
  <canvas id="c"></canvas>
  <button id="startStop">Start</button>

  <script>
    const canvas = document.getElementById('c');
    const ctx    = canvas.getContext('2d');
    const btn    = document.getElementById('startStop');
    let W, H;
    window.addEventListener('resize', () => {
      W = canvas.width  = window.innerWidth;
      H = canvas.height = window.innerHeight;
    });
    window.dispatchEvent(new Event('resize'));

    // countdown
    let duration = 0, remaining = 0, running = false, tick;
    btn.addEventListener('click', () => {
      if (running) {
        clearInterval(tick);
        btn.textContent = 'Start';
      } else if (remaining > 0) {
        tick = setInterval(() => {
          remaining--;
          if (remaining <= 0) {
            clearInterval(tick);
            running = false;
            btn.textContent = 'Start';
          }
        }, 1000);
        btn.textContent = 'Stop';
      }
      running = !running;
    });
    canvas.addEventListener('click', () => {
      if (running) return;
      const v = parseInt(prompt('Enter countdown in seconds:'), 10);
      if (!isNaN(v) && v > 0) remaining = duration = v;
    });

    // bounce state
    let x = 100, y = 100, dx = 2, dy = 2;
    const SPEED_UP = 1.1;
    const fontSize = 100;
    let hue = 0;

    function formatTime(s) {
      const m = String(Math.floor(s / 60)).padStart(2, '0');
      const sec = String(s % 60).padStart(2, '0');
      return `${m}:${sec}`;
    }

    function draw() {
      ctx.clearRect(0, 0, W, H);
      const txt = formatTime(remaining);

      // update hue
      hue = (hue + 1) % 360;
      ctx.fillStyle = `hsl(${hue}, 100%, 50%)`;

      ctx.font = `${fontSize}px Inter, sans-serif`;
      ctx.textBaseline = 'top';
      const tw = ctx.measureText(txt).width;
      const th = fontSize;

      // bounce & speed-up
      if (x + tw >= W && dx > 0) dx = -dx * SPEED_UP;
      if (x <= 0     && dx < 0) dx = -dx * SPEED_UP;
      if (y + th >= H && dy > 0) dy = -dy * SPEED_UP;
      if (y <= 0     && dy < 0) dy = -dy * SPEED_UP;

      x += dx;
      y += dy;
      ctx.fillText(txt, x, y);
    }

    (function loop(){
      draw();
      requestAnimationFrame(loop);
    })();
  </script>
</body>
</html>
